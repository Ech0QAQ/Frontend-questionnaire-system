# 在线问卷调查系统

## 项目简介

一个基于纯前端技术栈实现的轻量级在线问卷调查系统，无需后端服务器支持，利用浏览器本地存储实现数据持久化。该系统提供完整的问卷生命周期管理功能，包括问卷创建、编辑、发布、填写及数据统计分析，适用于小型团队、课程调研、活动反馈等场景。

### 技术栈
- **前端框架**: 原生 HTML5 + CSS3 + JavaScript (ES6+)
- **数据可视化**: ECharts 5.6.0
- **数据存储**: LocalStorage API
- **架构模式**: 单页应用 (SPA) 多页面组织

## 项目亮点

### 1. 纯前端实现，零后端依赖
- 完全基于浏览器端技术，无需服务器部署
- 使用 LocalStorage 实现数据持久化，支持离线使用
- 降低了部署和维护成本，适合快速原型开发和教学演示

### 2. 完整的问卷生命周期管理
- **状态管理**: 未发布 → 已发布 → 已过期的完整状态流转
- **权限控制**: 基于问卷状态的操作权限管理（如已发布问卷不可编辑）
- **截止日期**: 自动判断问卷是否过期，过期问卷禁止填写

### 3. 灵活的题型支持
- **单选题**: 支持自定义选项数量，动态添加/删除选项
- **多选题**: 提供多选答案收集能力
- **文本题**: 支持开放式问答，可设置必填/非必填

### 4. 数据可视化分析
- 集成 ECharts 图表库，提供直观的数据展示
- **单选题**: 柱状图展示，显示选项分布和百分比
- **多选题**: 饼图展示，直观反映选项占比
- **文本题**: 统计有效/无效回答数量

### 5. 良好的用户体验设计
- 实时表单验证，防止空问卷发布
- 操作确认机制，避免误删数据
- 自动序号管理，问题增删后自动重排
- 响应式图表，适配不同屏幕尺寸

## 核心功能

### 1. 问卷管理
- **创建问卷**: 支持自定义问卷标题、截止日期
- **编辑问卷**: 未发布状态下可自由编辑
- **删除问卷**: 支持单个删除和批量删除（带确认提示）
- **查看问卷**: 预览问卷内容和题目结构
- **发布问卷**: 一键发布，发布后锁定编辑权限

### 2. 题目编辑
- **题型选择**: 点击图标快速添加不同题型
- **选项管理**: 动态增加/删除选项，自动字母标记（A、B、C...）
- **题目排序**: 自动维护题目序号，删除题目后自动重排
- **必填设置**: 文本题支持必填/非必填配置

### 3. 问卷填写
- **表单验证**: 
  - 单选/多选题必填校验
  - 文本必填题空值检测
  - 提交前统一验证，提示缺失项
- **答案提交**: 
  - 收集完整的答题记录
  - 记录提交时间戳
  - 支持同一问卷多次提交

### 4. 数据分析
- **答卷统计**: 统计每个问题的回答情况
- **可视化图表**: 
  - 单选题：柱状图 + 人数/百分比标注
  - 多选题：饼图 + 图例说明
  - 文本题：有效/无效回答统计
- **交互提示**: 鼠标悬停显示详细数据信息

### 5. 状态控制
- **未发布**: 可编辑、可删除、不可填写、不可分析
- **已发布**: 不可编辑、可删除、可填写、可分析
- **已过期**: 不可编辑、可删除、不可填写、可分析

## 核心技术实现

### 1. LocalStorage 数据管理
- **数据持久化**: 使用 JSON 序列化存储复杂对象
- **数据分离**: 问卷定义和答卷数据分别存储
- **数据索引**: 通过问卷ID快速检索对应答卷

### 2. 动态表单生成
- **DOM 操作**: 使用原生 JavaScript 动态创建表单元素
- **事件委托**: 在父容器上监听事件，减少事件监听器数量
- **模板字符串**: 利用 ES6 模板字符串简化 HTML 生成

### 3. 状态管理
- **URL 参数传递**: 通过 URLSearchParams 传递问卷ID
- **全局状态共享**: 使用 localStorage 作为跨页面状态存储
- **实时状态计算**: 基于截止日期和发布状态动态计算按钮可用性

### 4. 图表渲染优化
- **延迟初始化**: 使用 requestAnimationFrame 和 setTimeout 确保 DOM 渲染完成
- **响应式设计**: 监听 window.resize 事件，自动调整图表尺寸
- **配色方案**: 自定义调色板，统一视觉风格

## 功能展示

### 问卷列表
- 展示所有问卷的基本信息（标题、创建时间、发布时间、截止日期、状态）
- 支持全选和批量删除
- 根据问卷状态动态显示可用操作

### 问卷编辑
- 通过点击题型图标快速添加问题
- 拖拽式选项管理（增加/删除选项）
- 实时预览问卷效果
- 表单验证防止空白提交

### 数据分析
- 单选题：柱状图显示选项分布，标注人数和百分比
- 多选题：饼图显示选项占比，图例展示详细信息
- 文本题：统计有效和无效回答数量
- 支持图表交互，鼠标悬停显示详细信息

## 技术特色

1. **无框架依赖**: 纯原生 JavaScript 实现，代码简洁易懂
2. **模块化设计**: 每个页面独立的 JS 文件，便于维护
3. **事件委托**: 高效处理动态添加的元素事件
4. **数据驱动**: 基于数据结构渲染界面，数据与视图分离
5. **用户友好**: 完善的表单验证和操作提示机制
